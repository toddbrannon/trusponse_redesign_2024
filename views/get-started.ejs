<%- include('partials/header') %>

<section class="service-selection-section">
  <div class="container">
    <h2>Select Your Services</h2>
    <p>Choose the services you're interested in and let us know how we can help you.</p>

    <form id="serviceSelectionForm" action="/submit-service-selection" method="POST">
      <div class="service-selection-card">
        <h3>Our Services</h3>
        <div class="checkbox-group">
          <% 
          const services = [
            { value: 'dataManagement', label: 'Data Management & Analysis' },
            { value: 'webDevelopment', label: 'Web Development' },
            { value: 'aiAutomation', label: 'AI Automation' },
            { value: 'businessIntelligence', label: 'Business Intelligence' },
            { value: 'mobileAppDevelopment', label: 'Mobile App Development' },
            { value: 'cybersecurity', label: 'Cybersecurity' },
            { value: 'chatbots', label: 'Chatbots & Virtual Assistants' },
            { value: 'customSoftware', label: 'Custom Software Solutions' }
          ];
          services.forEach(service => { 
          %>
            <div class="service-card">
              <label>
                <input type="checkbox" name="services" value="<%= service.value %>"> 
                <span><%= service.label %></span>
              </label>
            </div>
          <% }); %>
        </div>

      <div class="contact-info">
        <h3>Contact Information</h3>
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="email" placeholder="Your Email" required>
        <input type="tel" name="phone" placeholder="Phone Number">
        <textarea name="message" placeholder="Tell us more about your project or needs"></textarea>
      </div>

      <div class="preferred-contact-times">
        <h3>Preferred Contact Times</h3>
        <p>Select up to four time slots when we can reach you:</p>
        <div class="time-selector">
          <div class="timezone-selector">
            <label for="timezone-select">Your Timezone:</label>
            <select id="timezone-select">
              <!-- We'll populate this with JavaScript -->
            </select>
          </div>
          <div class="date-picker">
            <button type="button" class="date-nav prev" data-prev-button>&lt;</button>
            <div class="date-list">
              <% 
              const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
              const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
              const today = new Date();
              for (let i = 0; i < 7; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                if (date.getDay() !== 0 && date.getDay() !== 6) { // Exclude weekends
              %>
                <div class="date-item" data-date="<%= date.toISOString().split('T')[0] %>">
                  <span class="day"><%= days[date.getDay()] %></span>
                  <span class="date"><%= date.getDate() %></span>
                  <span class="month"><%= months[date.getMonth()] %></span>
                </div>
              <% 
                }
              } 
              %>
            </div>
            <button type="button" class="date-nav next">&gt;</button>
          </div>
          <div class="time-slots">
            <% 
            const timeSlots = [
              '08:00', '09:00', '10:00', '11:00', '12:00', 
              '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'
            ];
            timeSlots.forEach(time => { 
              // Convert to AM/PM format
              const [hour, minute] = time.split(':');
              const ampm = hour >= 12 ? 'PM' : 'AM';
              const displayHour = hour % 12 || 12; // Convert to 12-hour format
            %>
              <button type="button" class="time-slot" data-time="<%= time %>">
                <%= displayHour %>:<%= minute %> <%= ampm %>
              </button>
            <% }); %>
          </div>
          <div id="selectedTimes" class="selected-times"></div>
        </div>
      </div>

      <button type="submit" class="submit-button">Submit</button>
    </form>
  </div>
</section>

<%- include('partials/footer') %>